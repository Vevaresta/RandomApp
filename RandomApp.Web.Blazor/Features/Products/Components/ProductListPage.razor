@page "/products"
@using RandomApp.ProductManagement.Application.DataTransferObjects
@using RandomApp.Web.Client
@using RandomApp.Web.Client.Services
@using Microsoft.AspNetCore.Components.Web
@inject IProductDisplayService ProductDisplayService

<PageTitle>Products</PageTitle>
<h3>Products List</h3>

@if (productDtos == null)
{
    <p>Loading...</p>
}
else
{
    @foreach(var productDto in productDtos)
    {
        <div class="product-item">
            <h4>@productDto.Title</h4>
            <p>@productDto.Description</p>
        </div>
    }
}


@code {
    private IEnumerable<ProductDto> productDtos;

    protected override async Task OnInitializedAsync()
    {
        productDtos = await ProductDisplayService.GetProductsAsync();
    }
}